<!-- main -->
<div *ngIf="gig$ | async; let gig" fxLayout="row" class="container">
    <!-- left : title, name, etc -->
    <div fxLayout="column" fxLayoutGap="1rem">
      <mat-card fxFlex="60" fxLayout="column" class="full-height">
        <mat-card-header>
          <mat-card-title>{{ gig.title! }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div>
            <app-image-upload
              [showUpload]="false"
              [defaultImage]="default"
              [source]="gig.imagePath?.path"
              [download]="download">
            </app-image-upload>
          </div>
        </mat-card-content>
      </mat-card>
          
      <mat-card>
        <mat-card-header>
          <mat-card-title>About this Gig</mat-card-title>
          <mat-card-subtitle>Information</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p>
            {{ gig.description }}
          </p>
        </mat-card-content>
      </mat-card>
  
      <app-seller-overview *ngIf="profile$ | async; let profile" [profile]="profile"></app-seller-overview>
  
      <h2 *ngIf="gig.questions">FAQ</h2>
  
      <mat-accordion *ngFor="let question of gig.questions">
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ question.title }}
              </mat-panel-title>
              <mat-panel-description>
                Expand to see answer
              </mat-panel-description>
            </mat-expansion-panel-header>
            <p>{{ question.answer }}</p>
          </mat-expansion-panel>
        </mat-accordion>
      <mat-divider *ngIf="gig.questions">
      </mat-divider>
    </div>

    <!-- right: packages and price -->
    <div fxLayout="column" fxFlexOffset="5" fxFlex="35" class="packages-overview">
        <mat-card>
            <mat-card-content>
              <mat-tab-group mat-align-tabs="center">
                <mat-tab *ngFor="let package of gig.packages"> 
                  <ng-template mat-tab-label>{{package.title}}</ng-template>
                  <div fxLayout="column" fxLayoutGap="3">
                    <div fxLayout="row" fxLayoutAlign="space-between center">
                        <h2>{{package.title}}</h2>
                        <h3>{{ package.price }}$</h3>
                    </div>
                  
                    <p> {{ package.description }} </p>

                    <div fxLayout="row" fxLayoutAlign="space-between center">
                        <section fxLayout="row" fxLayoutGap="1rem" fxFlexAlign="start center">
                            <mat-icon>schedule</mat-icon>
                            <span>Delivery Time: 3 days</span>
                        </section>

                        <section fxLayout="row" fxLayoutGap="1rem"  fxFlexAlign="start center">
                            <mat-icon>remove_red_eye</mat-icon>
                            <span>Revision: 10</span>
                        </section>
                    </div>

                    <a mat-button [routerLink]="['/gigs', gig.id, 'packages', package.id, 'checkout']">Link</a>

                </div>
                </mat-tab>
              </mat-tab-group>
            </mat-card-content>
          </mat-card>
        <div *ngIf="canModify" fxFlexOffset.gt-lg="1rem" fxLayout.gt-lg="column" fxLayoutGap.gt-lg="1rem">
          <button mat-raised-button 
            (click)="edit(gig)">Edit</button>

          <button mat-raised-button 
            color="primary" 
            (click)="edit(gig)">Delete</button>
        </div>

</div>